name: Deploy AWS PROD

on:
  push:
    branches:
      - main
      
jobs:
  build-docker-image:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Build Docker Image
      run: |
        echo vai gerar a imagem docker
        echo repository name: ${{vars.AWS_ECR_REPOSITORY_NAME}}
        echo region: ${{ vars.AWS_REGION}}

  deploy-prod:
    needs: build-docker-image
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'    
    steps:
    - name: Checkout c√≥digo
      uses: actions/checkout@v2

    - name: Deploy PROD
      run: echo "Deploy em PROD"